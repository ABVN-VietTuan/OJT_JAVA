sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/routing/History","sap/m/MessageBox","sap/m/MessageToast"],(e,t,o,a)=>{"use strict";return e.extend("frontend.controller.CreateEmployee",{onInit(){const e=new sap.ui.model.json.JSONModel({firstName:"",lastName:"",email:"",gender:"",dateOfBirth:"",hireDate:"",role_ID:"",department_ID:""});this.getView().setModel(e,"newEmployee")},onNavBack:function(){console.log("hello");const e=t.getInstance();const o=e.getPreviousHash();if(o!==undefined){window.history.go(-1)}else{this.getOwnerComponent().getRouter().navTo("ListEmployee",{},true)}},onCreateEmployee:async function(){const e=this.getView().getModel("newEmployee");const t=e.getData();if(t.dateOfBirth instanceof Date){t.dateOfBirth=t.dateOfBirth.toISOString().split("T")[0]}if(t.hireDate instanceof Date){t.hireDate=t.hireDate.toISOString().split("T")[0]}console.log(t);const n=this.getView().getModel("employee");if(!t.firstName||!t.lastName||!t.email){o.warning("Please fill in First Name, Last Name, and Email.");return}try{const e=n.bindList("/Employees");const o=e.create(t);await o.created();console.log("check");a.show("Employee created successfully!",{width:"15em",my:"center center",at:"center center",of:window,offset:"0 0",collision:"fit fit",onClose:null,autoClose:true,animationTimingFunction:"ease",animationDuration:1e3,closeOnBrowserNavigation:true});this.getOwnerComponent().getRouter().navTo("ListEmployee")}catch(e){console.error("Create failed:",e);o.error("Failed to create employee. Please try again.")}},onCalculateSalary:async function(){try{const e=this.getView();const t=e.getModel("newEmployee").getData();const o=t.ID||t.id;const n=oModel.bindContext("/calculateSalary(...)",undefined,{$select:"value"});await n.setParameter("employeeId",o);await n.execute();const i=n.getBoundContext().getObject();e.getModel("newEmployee").setProperty("/salary",i.value);a.show("Salary calculated: $$"+i.value)}catch(e){console.error("Salary calculation failed:",e);o.error("Failed to calculate salary.")}}})});
//# sourceMappingURL=CreateEmployee.controller.js.map